# Описание работы `arpcp кластера`

![](arpcp_scheme.png)

У нас есть централизованная система из нескольких рабочих станций, соединённых единой сетью. 

На главном компьютере в этой системе установленно приложение `arpcp controller` *(Далее буду называть этот компьютер просто `controller`)*. На вторичных компютерах установлен `arpcp agent` *(Далее буду называть эти компьютеры `agent`'ами)*. 

На всех компьютерах, являющихся частью `arpcp кластера`, установлены `Python`, `arpcp client` *(Далее `client`)*, `arpcp storage` *(Далее `storage`)*.

На `agent`'ах установлен `arpcp agent-server` *(Далее `agent-server`)*, `arpcp daemon` *(Далее `daemon`)*

На `controller`'e установлен `arpcp controller-server` *(Далее `controller-server`)*, и с помощью python-фреймворка ***Django***  автоматически пушится сайт, с помощью которого можно мониторить и управлять данным `arpcp кластером`.

`Contoller` периодически отправляет запрос `echo-request` для мониторинга статуса и поиска новых `agent`'ов.

`Client` на `contoller`'е может подсоединиться к `agent-server`'у и отправить `arpcp` запрос на выполнение задачи, который содержит в себе id задачи, саму задачу и (....). При этом информация о задаче, такая как id задачи, ip `agent`'а, (....) сохраняется в `storage` в контроллере. После этого соединение разрывается.

Когда `agent` выполнил задачу, его `client` подключается к `controller-server`'у и отравляет `arpcp` сообщение о том, что задача под таким-то id выполнена (и возможно сразу возвращает ему результат, тут нужно подумать). 